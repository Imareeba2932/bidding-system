{% extends 'base.html' %}
{% block title %}Bids{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-warning mb-0"><i class="fas fa-hand-paper mr-2"></i>Bids</h2>
</div>
<div class="table-responsive">
<table class="table table-dark table-hover table-bordered rounded">
    <thead class="thead-dark">
        <tr>
            <th>ID</th>
            <th>Auction</th>
            <th>User</th>
            <th>Amount</th>
            <th>Time</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for b in bids %}
        <tr>
            <td>{{ b.id }}</td>
            <td>{{ b.auction.title if b.auction and b.auction.title is defined else b.auction.name }}</td>
            <td>{{ b.user.name if b.user and b.user.name is defined else b.user.name }}</td>
            <td><strong>â‚¹{{ b.amount }}</strong></td>
            <td>
                {% if b.bid_time %}
                    {% if b.bid_time.strftime is defined %}
                        {{ b.bid_time.strftime('%Y-%m-%d %H:%M') }}
                    {% else %}
                        {{ b.bid_time }}
                    {% endif %}
                {% else %}
                    N/A
                {% endif %}
            </td>
            <td>
                {% if b.approved %}
                    <span class="badge badge-success"><i class="fas fa-check mr-1"></i>Approved</span>
                {% elif b.rejected %}
                    <span class="badge badge-danger"><i class="fas fa-times mr-1"></i>Rejected</span>
                {% else %}
                    <span class="badge badge-warning text-dark"><i class="fas fa-clock mr-1"></i>Pending</span>
                {% endif %}
            </td>
            <td>
                {% if not b.approved and not b.rejected %}
                    <a href="{{ url_for('approve_bid', id=b.id) }}" class="btn btn-sm btn-outline-success" title="Approve"><i class="fas fa-check"></i></a>
                    <a href="{{ url_for('reject_bid', id=b.id) }}" class="btn btn-sm btn-outline-danger" title="Reject"><i class="fas fa-times"></i></a>
                {% endif %}
                <a href="{{ url_for('delete_bid', id=b.id) }}" class="btn btn-sm btn-outline-warning" title="Delete" onclick="return confirm('Delete this bid?')"><i class="fas fa-trash"></i></a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}